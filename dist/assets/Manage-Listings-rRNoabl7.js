import{_ as fe,F as pe,D as me,M as ye,Q as ve,u as he,a as be,r as d,g as G,t as S,P as W,o as we,h as ke,i as m,b as _,c as E,e as t,j as i,l as h,m as p,w as D,n as r,x as Ae,N as Ee,B as De,C as Ie,E as Re,z as u,H as j,A as b,s as Pe,K as Oe,p as xe,d as Be,q as Ce}from"./index-LjW8QbZt.js";import{E as Le}from"./ErrorModal-_8tJkFS0.js";import{C as Me}from"./ConfirmationModal-qGjs4P3k.js";import{C as Ne}from"./auto-lleZGeOg.js";const Se={components:{FOOTER:pe,DASHBOARD:me,ERRORMODAL:Le,CONFIRMATIONMODAL:Me,MENU:ye,MESSAGE:ve},setup(){const c=he(),s=be();let U=d(!0),a=d(1),q=d(!1),T=d(!1),I=d(!1),R=d(!1),o=d(void 0),P=d(!1),f=d(!1),C=d(void 0),y=d(void 0),v=d(void 0),k=d([]),e=d([]),A=d([]),O=d({}),x=d(void 0),B=d(void 0),z=d(void 0),L=d(void 0),K="https://easyrentage.s3.af-south-1.amazonaws.com/",Q=d(void 0);const V=d(null),F=d(null),Y=d(null),{data:Z,error:ua}=G("/api/loggedIn",b.loggedIn),{data:J,error:ga}=G("/api/fetch_properties",b.fetch_properties);setTimeout(()=>{let l=S(Z.value);B.value=l.message,X(B),O.value=l.user,x.value=O.value.settings.filterListings,A.value=S(J.value);let n=W.get_managelisting_page(c.query.page,x.value,B.value,S(O.value),S(A.value).listings);switch(n.message){case"Bad request":window.location.assign("/page-not-found");break;case"error occured":window.location.assign("/error");break;case"user does not exist":window.location.assign("/sign-in");break;default:k.value=n.paginatedListings,e.value=n.all_listings,L.value=n.total_pages;break}},1e3);function X(l){l.value===!0?(I.value=!1,R.value=!0):(I.value=!0,R.value=!1,window.location.assign("/sign-in"))}function M(){setTimeout(()=>{let l=document.getElementById("main_nav");j.screenhandler(window.innerWidth,1027,l)})}function $(){let l=document.getElementById("main_nav"),n=document.getElementById("dashboard_nav"),g=document.getElementById("delete_nav");l.style.display==="none"?l.style.display="inline-block":l.style.display="none",n.style.display="none",g.style.display="none"}function ee(){let l=document.getElementById("main_nav"),n=document.getElementById("dashboard_nav"),g=document.getElementById("delete_nav");n.style.display==="none"?n.style.display="inline-block":n.style.display="none",l.style.display="none",g.style.display="none"}function ae(){let l=document.getElementById("main_nav"),n=document.getElementById("dashboard_nav"),g=document.getElementById("delete_nav");g.style.display==="inline-block"?g.style.display="none":g.style.display="inline-block",l.style.display="none",n.style.display="none"}function te(l){let n=document.getElementById("dashboard_nav"),g=document.getElementById("main_nav"),ue=document.getElementById("sub_div"),ge=document.getElementById("delete_nav");l.target.className.toString().includes("remove")==!1&&(n.style.display="none",ge.style.display="none",ue.style.display="none"),j.removenav(l,window.innerWidth,1027,g)}function H(){o.value=c.params.message,window.setTimeout(()=>{o.value=void 0},3e3)}function le(){window.setInterval(()=>{},1e3)}function se(l){const n=document.getElementById("myChart");new Ne(n,{type:"bar",data:{labels:["Published Listings","Unpublished Listings","Pending Listings"],datasets:[{label:" Listing Statistics",maxBarThickness:88,minBarLength:1,data:[N("Published"),N("Unpublished"),N("Pending")]}]},options:{scales:{y:{beginAtZero:!0}}}})}function N(l){return e.filter(function(g){return g.status===l}).length}function ne(l){switch(l.target.innerText){case" Delete All listings":y.value="All your listings will be deleted, do you wish to continue",v.value=void 0;break;case" Delete Unpublished listings":y.value="All unpublished listings will be deleted, do you wish to continue",v.value=void 0;break;case" Delete Pending listings":y.value="All pending listings will be deleted, do you wish to continue",v.value=void 0;break;case" Delete Published listings":y.value="All published listings will be deleted, do you wish to continue",v.value=void 0;break;case" Delete":y.value="Are you sure you want to delete listing with id ",v.value=`${l.target.parentElement.parentElement.children[1].children[3].children[1].innerHTML}`;break}f.value=!0}async function ie(l){var n;switch(l){case"All your listings will be deleted, do you wish to continue":n=await b.delete_listings_categorically({data:{category:"Delete All listings"}}),window.location.assign("/dashboard/manage-listings?page=1");break;case"All unpublished listings will be deleted, do you wish to continue":n=await b.delete_listings_categorically({data:{category:"Delete Unpublished listings"}}),n.message==="There was an error..."?(P.value=!0,C.value=n.message,f.value=!1):window.location.assign("/dashboard/manage-listings?page=1");break;case"All pending listings will be deleted, do you wish to continue":n=await b.delete_listings_categorically({data:{category:"Delete Pending listings"}}),window.location.assign("/dashboard/manage-listings?page=1");break;case"All published listings will be deleted, do you wish to continue":n=await b.delete_listings_categorically({data:{category:"Delete Published listings"}}),window.location.assign("/dashboard/manage-listings?page=1");break;default:let g=`${l.split(" ")[l.split(" ").length-1]}`;n=await b.delete_listing({data:{listing_id:g}}),window.location.assign("/dashboard/manage-listings?page=1");break}}function oe(){f.value=!1}function de(l){P.value=!1}function re(){c.query.page!=L.value?(window.location.assign("/dashboard/manage-listings?page="+ ++c.query.page),k=respnse.message):V.value.attributes[1].nodeValue="color: gray;"}function ce(){c.query.page!=1?(window.location.assign("/dashboard/manage-listings?page="+--c.query.page),k=respnse.message):F.value.attributes[1].nodeValue="color: gray;"}async function _e(){let l=W.get_managelisting_page(c.query.page,x.value,B.value,O,A.listings);k.value=l.paginatedListings,e.value=l.all_listings,L.value=l.total_pages,window.location.assign("/dashboard/manage-listings?page=1"),await b.filter({parameter:x.value,page:"properties"})}return we(()=>{M(),window.addEventListener("resize",M),z.value=c.query.page,H(),le(),U.value=!1}),ke(()=>{window.removeEventListener("resize",M)}),{route:c,router:s,show_loader:U,test:a,main_nav:q,delete_nav:T,signInbtn:I,dashboardbtn:R,message:o,display_error_modal:P,display_confirmation_modal:f,error_description:C,category:y,listing_id:v,paginated_listings:k,all_listings:e,listings:A,user:O,filter:x,isAuthenticated:B,page_number:z,total_pages:L,backendUrl:K,columnOptions:Q,next_page:V,previous_page:F,columnChart:Y,toggle_main_nav:$,toggle_dashboard_nav:ee,toggle_delete_nav:ae,screenhandler:M,remove_navs:te,show:H,showChart:se,listing_category_length:N,initalise_categorical_delete:ne,delete_modal:ie,remove_confirmation_modal:oe,remove_error_modal:de,Next_page:re,Previous_page:ce,filter_search:_e}}},w=c=>(xe("data-v-602d4f9f"),c=c(),Be(),c),Ue={class:"header"},qe=w(()=>t("div",{class:"logo"},[t("a",{href:"#"},[t("img",{src:Ce,id:"logo",alt:"Logo"})])],-1)),Te={class:"accesslinks"},ze={class:"container"},Ve=w(()=>t("h1",null,"Manage Property",-1)),Fe={class:"filter_action_flex"},He={class:"filter"},Ge={for:"filter"},We=w(()=>t("option",null,"All",-1)),je=w(()=>t("option",null,"Unpublished listings",-1)),Ke=w(()=>t("option",null,"Pending listings",-1)),Qe=w(()=>t("option",null,"Published listings",-1)),Ye=[We,je,Ke,Qe],Ze={class:"delete"},Je={for:"delete"},Xe={id:"delete_nav",class:"select_delete",style:{display:"none"}},$e={class:"listings"},ea={class:"houses"},aa=["src"],ta={class:"house_info"},la={style:{"font-size":"15px"}},sa=w(()=>t("hr",null,null,-1)),na={class:"sub_info"},ia=w(()=>t("span",{class:"publish_tooltip"},"Your property will be live and seen by potential customers.",-1)),oa={key:1,id:"no_property"},da={key:2,class:"pagination"},ra={style:{"font-size":"16px"}},ca=Pe('<div class="status_meaning" data-v-602d4f9f><ul data-v-602d4f9f><li style="color:green;" data-v-602d4f9f>Published - <b style="color:black;font-weight:lighter;" data-v-602d4f9f> property has been approved and will be seen by site visitors.</b></li><li style="color:gray;" data-v-602d4f9f>Pending - <b style="color:black;font-weight:lighter;" data-v-602d4f9f> property is been reviewed, and awaiting approval.</b></li><li style="color:red;" data-v-602d4f9f>Unpublished - <b style="color:black;font-weight:lighter;" data-v-602d4f9f> property was rejected or has not been submitted for review.</b></li></ul></div>',1);function _a(c,s,U,a,q,T){const I=m("MENU"),R=m("ERRORMODAL"),o=m("font-awesome-icon"),P=m("DASHBOARD"),f=m("router-link"),C=m("MESSAGE"),y=m("CONFIRMATIONMODAL"),v=m("LOADER"),k=m("FOOTER");return _(),E("div",{id:"body",onClick:s[11]||(s[11]=(...e)=>a.remove_navs&&a.remove_navs(...e))},[t("div",Ue,[i(I,{id:"main_nav",style:{display:"none"}}),a.display_error_modal?(_(),h(R,{key:0,error_description:a.error_description,onRemove_error_modal:a.remove_error_modal},null,8,["error_description","onRemove_error_modal"])):p("",!0),qe,i(o,{class:"remove fa-solid fa-navicon",onClick:a.toggle_main_nav,id:"hamburger",icon:"fa-solid fa-navicon"},null,8,["onClick"]),i(P,{id:"dashboard_nav",easycoins:a.user.easycoins,style:{display:"none"}},null,8,["easycoins"]),t("ul",Te,[a.signInbtn?(_(),h(f,{key:0,to:"/sign-in",class:"",id:"signInbtn"},{default:D(()=>[r("Sign in")]),_:1})):p("",!0),a.dashboardbtn?(_(),E("li",{key:1,class:"remove",style:{padding:"0px"},onClick:s[0]||(s[0]=(...e)=>a.toggle_dashboard_nav&&a.toggle_dashboard_nav(...e))},"Menu")):p("",!0)])]),i(C),a.display_confirmation_modal?(_(),h(y,{key:0,id:"display_confirmation_modal",category:a.category,listing_id:a.listing_id,onRemove_confirmation_modal:a.remove_confirmation_modal,onDelete_modal:a.delete_modal},null,8,["category","listing_id","onRemove_confirmation_modal","onDelete_modal"])):p("",!0),t("div",ze,[Ve,i(f,{to:"/dashboard/post-listing",class:"",id:"add_property"},{default:D(()=>[r("Add property "),i(o,{class:"fa-solid fa-circle-plus",icon:"fa-solid fa-circle-plus",style:{"font-size":"12px"}})]),_:1}),t("div",Fe,[t("div",He,[t("label",Ge,[r("Show "),i(o,{class:"fa-solid fa-filter",icon:"fa-solid fa-filter",style:{"font-size":"12px"}})]),Ae(t("select",{id:"filter","onUpdate:modelValue":s[1]||(s[1]=e=>a.filter=e),onChange:s[2]||(s[2]=(...e)=>a.filter_search&&a.filter_search(...e))},Ye,544),[[Ee,a.filter]])]),t("div",Ze,[t("label",Je,[r("Action "),i(o,{class:"fa-solid fa-trash",icon:"fa-solid fa-trash",style:{"font-size":"12px"}})]),t("button",{id:"delete_btn",onClick:s[7]||(s[7]=De((...e)=>a.toggle_delete_nav&&a.toggle_delete_nav(...e),["prevent"])),class:"remove"},[r("Delete "),t("span",Xe,[t("p",{onClick:s[3]||(s[3]=(...e)=>a.initalise_categorical_delete&&a.initalise_categorical_delete(...e))},[i(o,{class:"fa-solid fa-trash",icon:"fa-solid fa-trash"}),r(" Delete All listings")]),t("p",{onClick:s[4]||(s[4]=(...e)=>a.initalise_categorical_delete&&a.initalise_categorical_delete(...e))},[i(o,{class:"fa-solid fa-trash",icon:"fa-solid fa-trash"}),r(" Delete Unpublished listings")]),t("p",{onClick:s[5]||(s[5]=(...e)=>a.initalise_categorical_delete&&a.initalise_categorical_delete(...e))},[i(o,{class:"fa-solid fa-trash",icon:"fa-solid fa-trash"}),r(" Delete Pending listings")]),t("p",{onClick:s[6]||(s[6]=(...e)=>a.initalise_categorical_delete&&a.initalise_categorical_delete(...e))},[i(o,{class:"fa-solid fa-trash",icon:"fa-solid fa-trash"}),r(" Delete Published listings ")])])])])]),a.show_loader?(_(),h(v,{key:0})):p("",!0),t("div",$e,[(_(!0),E(Ie,null,Re(a.paginated_listings,e=>(_(),E("div",ea,[t("img",{src:a.backendUrl+e.pictures[0]},null,8,aa),t("div",ta,[t("h1",null,[i(o,{class:"fa-solid fa-home",icon:"fa-solid fa-home"}),r(" "+u(`${e.bedroom}`>0?`${e.bedroom} bedroom`:" ")+" "+u(`${e.subtype}`||`${e.type}`)+" "+u(`${e.category}`),1)]),t("h2",null,[i(o,{class:"fa-solid fa-location-crosshairs",icon:"fa-solid fa-location-crosshairs"}),r(" "+u(e.location)+" "+u(e.town)+", "+u(e.state)+" state.",1)]),t("p",null,[i(o,{class:"fa-solid fa-calender-days",icon:"fa-solid fa-calender-days",style:{"font-size":"11px"}}),r(" Date Added: "),t("b",null,u(e.dateAdded),1)]),t("p",null,[i(o,{class:"fa-solid fa-fingerprint",icon:"fa-solid fa-fingerprint",style:{"font-size":"11px"}}),r(" Property Id: "),t("b",null,u(e.id),1)]),t("p",null,[i(o,{class:"fa-solid fa-clipboard-check",icon:"fa-solid fa-clipboard-check",style:{"font-size":"11px"}}),r(" Status: "),t("b",{style:Oe(e.status==="Published"?{color:"green"}:e.status==="Unpublished"?{color:"red"}:{color:"gray"})},u(e.status),5)]),t("p",null,[r("Price: "),t("b",la,u(new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(e.price))+" "+u(e.payment),1)])]),sa,t("div",na,[e.status==="Published"?(_(),h(f,{key:0,to:"/view-listing/"+e.id,class:"sub_info_child"},{default:D(()=>[i(o,{class:"fa-solid fa-pen-to-square",icon:"fa-solid fa-pen-to-square"}),r(" View")]),_:2},1032,["to"])):p("",!0),e.status==="Unpublished"?(_(),h(f,{key:1,to:"/dashboard/edit-listing/"+e.id,class:"sub_info_child"},{default:D(()=>[i(o,{class:"fa-solid fa-pen-to-square",icon:"fa-solid fa-pen-to-square"}),r(" Edit")]),_:2},1032,["to"])):p("",!0),e.status==="Unpublished"?(_(),h(f,{key:2,to:"/dashboard/post-pictures/"+e.id,class:"sub_info_child"},{default:D(()=>[i(o,{class:"fa-solid fa-images",icon:"fa-solid fa-images"}),r(" Pictures")]),_:2},1032,["to"])):p("",!0),e.status==="Unpublished"?(_(),h(f,{key:3,to:"/dashboard/post-pictures/"+e.id,class:"sub_info_child",id:"publish_now"},{default:D(()=>[i(o,{class:"fa-solid fa-upload",icon:"fa-solid fa-upload"}),r(" Publish "),ia]),_:2},1032,["to"])):p("",!0),t("p",{class:"sub_info_child",onClick:s[8]||(s[8]=(...A)=>a.initalise_categorical_delete&&a.initalise_categorical_delete(...A))},[i(o,{class:"fa-solid fa-trash",icon:"fa-solid fa-trash"}),r(" Delete")])])]))),256))]),a.paginated_listings.length===0&&a.isAuthenticated?(_(),E("p",oa,"No "+u(a.filter==="All"?"listings":a.filter),1)):p("",!0),a.total_pages>1?(_(),E("div",da,[t("p",{style:{color:"black",cursor:"pointer"},ref:"previous_page",onClick:s[9]||(s[9]=(...e)=>a.Previous_page&&a.Previous_page(...e))},[i(o,{class:"fa-solid fa-arrow-left-long",icon:"fa-solid fa-arrow-left-long"})],512),t("p",ra,"Page "+u(this.$route.query.page)+" of "+u(a.total_pages),1),t("p",{style:{color:"black",cursor:"pointer"},ref:"next_page",onClick:s[10]||(s[10]=(...e)=>a.Next_page&&a.Next_page(...e))},[i(o,{class:"fa-solid fa-arrow-right-long",icon:"fa-solid fa-arrow-right-long"})],512)])):p("",!0),ca]),i(k)])}const ha=fe(Se,[["render",_a],["__scopeId","data-v-602d4f9f"]]);export{ha as default};
