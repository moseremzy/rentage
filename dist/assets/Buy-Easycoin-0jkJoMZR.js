import{_ as G,i as R,b,c as E,e,B as S,j as c,z as i,p as z,d as H,u as Z,a as ee,r as n,f as te,g as ne,t as ae,O as le,o as oe,h as se,H as O,k as s,D as ie,l as de,w as re,m as F,x as ue,y as ce,J as _e,n as L,C as me,E as ve,M as ye,K as fe,F as pe,q as he,A as D}from"./index-LjW8QbZt.js";import{E as ge}from"./ErrorModal-_8tJkFS0.js";const be={props:["info_description"],methods:{remove_info_modal(d){this.$emit("remove_info_modal",!1)}}},we=d=>(z("data-v-39242d0b"),d=d(),H(),d),Ie={id:"body"},Ee={class:"remove modal"},ke=we(()=>e("h3",{class:"remove modal"},"Note",-1));function xe(d,y,B,k,x,r){const N=R("font-awesome-icon");return b(),E("div",Ie,[e("div",{class:"cover",onClick:y[0]||(y[0]=S((...w)=>r.remove_info_modal&&r.remove_info_modal(...w),["prevent"]))}),e("div",Ee,[c(N,{icon:"fa-solid fa-info",id:"check"}),ke,e("p",null,i(B.info_description),1),e("button",{onClick:y[1]||(y[1]=S((...w)=>r.remove_info_modal&&r.remove_info_modal(...w),["prevent"]))},"OK")])])}const Ne=G(be,[["render",xe],["__scopeId","data-v-39242d0b"]]),o=d=>(z("data-v-4b946d02"),d=d(),H(),d),Be={class:"header"},Ce=o(()=>e("div",{class:"logo"},[e("a",{href:"#"},[e("img",{src:he,id:"logo",alt:"Logo"})])],-1)),qe={class:"accesslinks"},Re={class:"container"},Se=o(()=>e("h1",null,"Purchase Coins",-1)),Le={class:"flex"},Me={class:"modal"},Pe=o(()=>e("h3",null,[L("Buy Easycoin"),e("i",{class:"fa-sharp fa-solid fa-xmark",style:{float:"right","font-size":"17px",cursor:"pointer"}})],-1)),Te=o(()=>e("hr",null,null,-1)),Ae={style:{display:"block",color:"red",margin:"0px 0px 5px 5px"}},Oe={method:"post"},Fe=o(()=>e("button",{type:"button"},"EASYCOIN",-1)),De=o(()=>e("hr",null,null,-1)),Ge={class:"quantity"},ze=o(()=>e("p",null,"Coins:",-1)),He={class:"quantity"},Ve=o(()=>e("p",null,"Listings Allowed:",-1)),$e=o(()=>e("hr",null,null,-1)),Ue={class:"quantity"},We=o(()=>e("p",null,"Price:",-1)),Ke={class:"quantity"},je=o(()=>e("p",null,"Transaction Charge @2.5%:",-1)),Je={class:"quantity"},Ye=o(()=>e("p",{style:{"font-weight":"bold"}},"Total",-1)),Qe={style:{"font-weight":"bold"}},Xe=o(()=>e("hr",null,null,-1)),Ze=["disabled"],et={class:"payment_history",style:{height:"500px"}},tt=o(()=>e("h3",null,"Payment History",-1)),nt={class:"table_cover"},at={cellspacing:"0",id:"table"},lt=o(()=>e("tr",{id:"table_row"},[e("th",null,"Id"),e("th",null,"Easycoins"),e("th",null,"Listings Allowed"),e("th",null,"Paid"),e("th",null,"Payment Channel"),e("th",null,"Payment Date"),e("th",null,"Status")],-1)),ot={style:{color:"green"}},st={__name:"Buy-Easycoin",setup(d){const y=Z(),B=ee();n(!1),n(!1),n(!1);let k=n(!1),x=n(!1),r=te({}),N=n(void 0),w=n(!1),C=n(!1),M=n(void 0),_=n(void 0);n(!1);let P=n(void 0),T=n(void 0);n(!1);let f=n(""),A=n(""),u=n(0),p=n(0),m=n(0),h=n(0),g=n(0);const{data:V,error:it}=ne("/api/loggedIn",D.loggedIn);setTimeout(()=>{let t=ae(V.value);N.value=t.message,X(N),r=t.user,M.value=r.payments_history},1e3),le(_,async t=>{A.value=J(t)}),oe(()=>{q(),window.addEventListener("resize",q),y.query.trxref&&j()}),se(()=>{window.removeEventListener("resize",q)});function q(){setTimeout(()=>{let t=document.getElementById("main_nav");O.screenhandler(window.innerWidth,1027,t)})}function $(){let t=document.getElementById("main_nav"),a=document.getElementById("dashboard_nav");t.style.display==="none"?t.style.display="inline-block":t.style.display="none",a.style.display="none"}function U(){let t=document.getElementById("main_nav"),a=document.getElementById("dashboard_nav");a.style.display==="none"?a.style.display="inline-block":a.style.display="none",t.style.display="none"}async function W(t){let a=document.getElementById("dashboard_nav"),v=document.getElementById("main_nav"),I=document.getElementById("sub_div");t.target.className.toString().includes("remove")==!1&&(a.style.display="none",I.style.display="none"),O.removenav(t,window.innerWidth,1027,v)}function K(t){let a=document.getElementById("display_info_modal");a.style.display="none"}function j(t){setTimeout(()=>{let a=document.getElementById("display_info_modal");T.value="If payment does not reflect immediately, refresh the page after few minutes.",a.style.display="block"},2e3)}function J(t){return/^[1-9][0-9]*$/.test(t)===!1?(f.value="Invalid Input",u.value=0,p.value=0,m.value=0,h.value=0,g.value=0,!1):t<13?(f.value="The Minimum Purchase is 13 Easycoin",u.value=0,p.value=0,m.value=0,h.value=0,g.value=0,!1):t.length>6?(f.value="Maximum Purchase Reached",u.value=0,p.value=0,m.value=0,h.value=0,g.value=0,!1):(u.value=Number(t),p.value=u.value,m.value=80*u.value,h.value=2.5*(m.value/100),g.value=m.value+h.value,f.value="",!0)}async function Y(t){let a=document.getElementById("display_error_modal");if(_.value===" "||_.value===void 0){f.value="Field cannot be empty";return}if(A.value){let v=t;v.target.innerHTML="Please wait...",C.value=!0;let I={email:r.email,amount:100*g.value,quantity:u.value,maximum_listings:p.value};const l=await D.submit_payment(I);switch(l){case"error occured":P.value="There was a problem processing your request.",a.style.display="block",v.target.innerHTML='Pay <svg data-v-07fb7554="" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-right-long" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-arrow-right-long" style="float: right;"><path data-v-07fb7554="" fill="currentColor" d="M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z" class=""></path></svg>',w.value=!1,C.value=!1;break;case"no session":window.location.replace("/sign-in");break;default:window.location.replace(l.data.authorization_url);break}}}function Q(t){let a=document.getElementById("display_error_modal");a.style.display="none"}function X(t){t.value===!0?(k.value=!1,x.value=!0):(k.value=!0,x.value=!1,B.push({name:"home"}))}return(t,a)=>{const v=R("font-awesome-icon"),I=R("router-link");return b(),E("div",{id:"body",onClick:W},[e("div",Be,[c(ye,{id:"main_nav",style:{display:"none"}}),c(ge,{style:{display:"none"},id:"display_error_modal",error_description:s(P),onRemove_error_modal:Q},null,8,["error_description"]),c(Ne,{style:{display:"none"},id:"display_info_modal",info_description:s(T),onRemove_info_modal:K},null,8,["info_description"]),Ce,c(v,{class:"remove fa-solid fa-navicon",onClick:$,id:"hamburger",icon:"fa-solid fa-navicon"}),c(ie,{id:"dashboard_nav",easycoins:s(r).easycoins,style:{display:"none"}},null,8,["easycoins"]),e("ul",qe,[s(k)?(b(),de(I,{key:0,to:"/sign-in",class:"",id:"signInbtn"},{default:re(()=>[L("Sign in")]),_:1})):F("",!0),s(x)?(b(),E("li",{key:1,class:"remove",style:{padding:"0px"},onClick:U},"Menu")):F("",!0)])]),e("div",Re,[Se,e("div",Le,[e("div",Me,[Pe,Te,e("small",Ae,i(s(f)),1),e("form",Oe,[Fe,ue(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=l=>_e(_)?_.value=l:_=l),placeholder:"How many are you buying?",required:"required"},null,512),[[ce,s(_)]]),De,e("div",Ge,[ze,e("p",null,i(s(u)),1)]),e("div",He,[Ve,e("p",null,i(s(p)),1)]),$e,e("div",Ue,[We,e("p",null,i(new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(s(m))),1)]),e("div",Ke,[je,e("p",null,i(new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(s(h))),1)]),e("div",Je,[Ye,e("p",Qe,i(new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(s(g))),1)]),Xe,e("button",{type:"submit",onClick:S(Y,["prevent"]),id:"submit",disabled:s(C)},[L("Pay "),c(v,{class:"fa-solid fa-arrow-right-long",style:{float:"right"},icon:"fa-solid fa-arrow-right-long"})],8,Ze)])]),e("div",et,[tt,e("div",nt,[e("table",at,[lt,(b(!0),E(me,null,ve(s(M),l=>(b(),E("tr",null,[e("td",null,i(l.reference),1),e("td",null,i(l.quantity),1),e("td",null,i(l.max_listings),1),e("td",ot,i(new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(l.amount)),1),e("td",null,i(l.method),1),e("td",null,i(l.date),1),e("td",{style:fe(l.status==="success"?"color: green;":"color: red;")},i(l.status),5)]))),256))])])])])]),c(pe)])}}},ut=G(st,[["__scopeId","data-v-4b946d02"]]);export{ut as default};
