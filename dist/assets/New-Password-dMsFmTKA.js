import{_ as I,u as N,a as S,r as p,f as b,v as B,h as C,i as V,b as w,c as h,e as a,k as e,K as M,z as _,m as g,x as k,y,B as U,l as z,n as A,p as R,d as T,A as D}from"./index-LjW8QbZt.js";const E=l=>(R("data-v-0237009e"),l=l(),T(),l),K={id:"body"},L={class:"create_pass_form"},j=E(()=>a("h1",null,"Create New Password",-1)),q={id:"validation_msg"},F={class:"err"},G={class:"err"},H=["disabled"],J={__name:"New-Password",setup(l){const u=N();S(),p(!1);let t=p(!1),n=p(!1),d=p(!1),s=b({password:"",new_password:"",token:u.params.id}),o=b({password_err:"",new_password_err:""});s.token=u.params.id,B(()=>{m(),v()}),C(()=>{window.removeEventListener("resize",screenhandler)});function f(){window.setTimeout(()=>{this.backend_err=!1},5e3)}function m(){let r=s.password.length;if(s.password==="")o.password_err="Please fill field";else if(r<7||r>15)o.password_err="Must be between 7 and 15 characters long";else return o.password_err="",!0}function v(){if(s.new_password===s.password)return o.new_password_err="",!0;o.new_password_err="Must match password"}async function P(){if(m()&&v()){t.value=!0,n.value=!0;const r=await D.reset_password(s);r.message==="Password modified"?(n.value=!1,t.value=!1,window.location.replace("/sign-in")):r.message==="Invalid token"?(d.value="Invalid token",n.value=!1,t.value=!1,f()):(d.value="An error occured, try again later",n.value=!1,t.value=!1,f())}}return(r,i)=>{const x=V("font-awesome-icon");return w(),h("div",K,[a("div",L,[j,e(d)?(w(),h("div",{key:0,class:"validation_msg",style:M(e(d)==="Password modified"?{"background-color":"green",border:"1px solid green"}:{"background-color":"#b93c3c",border:"1px solid #b93c3c"})},[a("p",q,_(e(d)),1)],4)):g("",!0),a("form",null,[k(a("input",{type:"password","onUpdate:modelValue":i[0]||(i[0]=c=>e(s).password=c),name:"email",id:"email",placeholder:"New Password"},null,512),[[y,e(s).password]]),a("small",F,_(e(o).password_err),1),k(a("input",{type:"password","onUpdate:modelValue":i[1]||(i[1]=c=>e(s).new_password=c),name:"email",id:"email",placeholder:"Confirm Password"},null,512),[[y,e(s).new_password]]),a("small",G,_(e(o).new_password_err),1),a("button",{type:"submit",onClick:U(P,["prevent"]),id:"loginbtn",disabled:e(n)},[e(t)?(w(),z(x,{key:0,class:"fa-solid fa-spinner fa-spin",id:"spinner",icon:"fa-solid fa-spinner"})):g("",!0),A(" Submit")],8,H)])])])}}},Q=I(J,[["__scopeId","data-v-0237009e"]]);export{Q as default};
