import{_ as de,u as pe,a as _e,r as i,f as U,g as ce,t as ue,o as me,h as fe,v as ye,H as j,i as G,b as f,c as v,e,j as I,k as n,l as B,m as h,D as he,w as we,x as c,y as u,z as w,K as ge,B as $,n as b,A as P,M as ve,F as be,p as ke,d as Ue,q as xe}from"./index-LjW8QbZt.js";import{E as Ee}from"./ErrorModal-_8tJkFS0.js";import{C as Ce}from"./ConfirmationModal-qGjs4P3k.js";import{S as Ie}from"./SuccessModal-x3f7Qgur.js";const o=x=>(ke("data-v-8924f055"),x=x(),Ue(),x),Be={class:"header"},Pe=o(()=>e("div",{class:"logo"},[e("a",{href:"#"},[e("img",{src:xe,id:"logo",alt:"Logo"})])],-1)),Ve={class:"accesslinks"},Ne={class:"container"},Ae=o(()=>e("h1",null,"Account",-1)),De={class:"Edit_details"},Se=o(()=>e("h1",null,"Edit details",-1)),Te={action:"",enctype:"multipart/form-data"},Le=o(()=>e("label",{for:"firstname"},"Firstname",-1)),Re={class:"err"},$e=o(()=>e("label",null,"Lastname",-1)),Me={class:"err"},Oe=o(()=>e("label",null,"Phone",-1)),qe={class:"err"},ze=o(()=>e("label",null,"Email",-1)),Fe=o(()=>e("p",{class:"err"},null,-1)),We=o(()=>e("label",null,"Company Name",-1)),He={class:"err"},Ye=o(()=>e("label",null,"Company Address",-1)),Ze={class:"err"},je=o(()=>e("label",null,"Whatsapp Number",-1)),Ge=o(()=>e("p",{class:"err"},null,-1)),Ke=o(()=>e("label",null,"Company Website",-1)),Je=o(()=>e("p",{class:"err"},null,-1)),Qe=o(()=>e("label",null,"About Company",-1)),Xe=o(()=>e("p",null,"Company Logo",-1)),ea=o(()=>e("input",{type:"file",name:"company_logo"},null,-1)),aa=o(()=>e("p",{class:"err",style:{color:"black"}},"Upload your company logo",-1)),na=["disabled"],sa={class:"Edit_details Change_password"},ta=o(()=>e("h1",null,"Change password",-1)),oa={action:""},la={class:"err"},ra={class:"err"},ia={class:"err"},da=["disabled"],pa={class:"Edit_details settings"},_a=o(()=>e("h1",null,"Manage account",-1)),ca={class:"setting"},ua=o(()=>e("h2",null,"New listing alert",-1)),ma={key:0},fa=["href"],ya={key:1},ha=["href"],wa=o(()=>e("hr",null,null,-1)),ga={class:"setting"},va=o(()=>e("h2",null,"New property request alert",-1)),ba={key:0},ka=["href"],Ua={key:1},xa=["href"],Ea=o(()=>e("hr",null,null,-1)),Ca=o(()=>e("div",{class:"setting"},[e("h2",null,"Invite a friend"),e("p",null,[b("Get 5 Easycoin when someone signs up using your referral link "),e("a",{href:"/dashboard/invite-friends"},"Invite friend")])],-1)),Ia=o(()=>e("hr",null,null,-1)),Ba={class:"setting"},Pa=o(()=>e("h2",null,"Delete account",-1)),Va={__name:"Profile",setup(x){pe();const K=_e();i(!1),i(!1),i(void 0);let V=i(void 0),N=i(void 0),_=U({}),A=i(void 0),D=i(void 0);i(!1);let y=i(!1),S=i(null),M=i(void 0),T=i(!1),L=i(void 0),E=i(!1),C=i(void 0),k=i(!1),O=i(void 0),a=U({firstname:"",lastname:"",phone:"",email:"",company_name:"",company_address:"",whatsapp:"",website_link:"",about_company:"",company_logo:""}),d=U({firstname_err:"",lastname_err:"",phone_err:"",email_err:"",company_name_err:"",whatsapp_err:"",website_link_err:"",about_company_err:""}),r=U({old_password:"",new_password:"",confirm_password:""}),m=U({old_password_err:"",new_password_err:"",confirm_password_err:""});const{data:J,error:Na}=ce("/api/loggedIn",P.loggedIn);setTimeout(()=>{let t=ue(J.value);M.value=t.message,ae(M),_=t.user,A.value=t.listing_notification_subscribers.map(s=>s.email),D.value=t.request_notification_subscribers.map(s=>s.email),a.firstname=_.firstname,a.lastname=_.lastname,a.email=_.email,a.phone=_.phone,a.company_name=_.company_name,a.company_address=_.company_address,a.whatsapp=_.whatsapp,a.website_link=_.website_link,a.about_company=_.about_company,a.company_logo=`https://easyrentage.s3.af-south-1.amazonaws.com/${_.company_logo}`},1e3),me(()=>{R(),window.addEventListener("resize",R)}),fe(()=>{window.removeEventListener("resize",R)}),ye(()=>{q(),z(),F(),W(),H(),Y(),Z()});function R(){setTimeout(()=>{let t=document.getElementById("main_nav");j.screenhandler(window.innerWidth,1027,t)})}function Q(){let t=document.getElementById("main_nav"),s=document.getElementById("dashboard_nav");t.style.display==="none"?t.style.display="inline-block":t.style.display="none",s.style.display="none"}function X(){let t=document.getElementById("main_nav"),s=document.getElementById("dashboard_nav");s.style.display==="none"?s.style.display="inline-block":s.style.display="none",t.style.display="none"}async function ee(t){let s=document.getElementById("dashboard_nav"),p=document.getElementById("sub_div"),g=document.getElementById("main_nav");t.target.className.toString().includes("remove")==!1&&(s.style.display="none",p.style.display="none"),j.removenav(t,window.innerWidth,1027,g)}function ae(t){t.value===!0?(V.value=!1,N.value=!0):(V.value=!0,N.value=!1,K.push({name:"home"}))}function ne(t){E.value=!1}function q(){let t=/^[A-Za-z]+$/;if(a.firstname==="")d.firstname_err="Please fill field";else if(t.test(a.firstname)===!1)d.firstname_err="Firstname can only contain letters";else return d.firstname_err="",!0}function z(){let t=/^[A-Za-z]+$/;if(a.lastname==="")d.lastname_err="Please fill field";else if(t.test(a.lastname)===!1)d.lastname_err="Lastname can only contain letters";else return d.lastname_err="",!0}function F(){let t=/^[0-9]*$/,s=a.phone.length;if(a.phone==="")d.phone_err="Please fill field";else if(t.test(a.phone)===!1)d.phone_err="Invalid phone number";else if(s>11)d.phone_err="Cannot be 12 digits long";else return d.phone_err="",!0}function W(){if(a.about_company.length>=400)a.about_company=a.about_company.slice(0,400),S.value.attributes[2].nodeValue="color: red;";else return S.value.attributes[2].nodeValue="color: gray;",!0}function H(){if(r.old_password==="")m.old_password_err="Please fill field";else return m.old_password_err="",!0}function Y(){let t=r.new_password.length;if(r.new_password==="")m.new_password_err="Please fill field";else if(t<7||t>15)m.new_password_err="Must be between 7 and 15 characters long";else return m.new_password_err="",!0}function Z(){if(r.confirm_password==="")m.confirm_password_err="Please fill field";else if(r.confirm_password!==r.new_password)m.confirm_password_err="Must match new password";else return m.confirm_password_err="",!0}async function se(t){if(q()&&z()&&F()&&W()){let s=document.getElementsByName("company_logo")[0].files[0],p=new FormData;p.append("firstname",a.firstname),p.append("lastname",a.lastname),p.append("phone",a.phone),p.append("email",a.email),p.append("company_name",a.company_name),p.append("company_address",a.company_address),p.append("whatsapp",a.whatsapp),p.append("website_link",a.website_link),p.append("about_company",a.about_company),p.append("company_logo",s),y.value=!0,t.target.innerText="Updating Profile...";const g=await P.update_user_info(p);g.message==="Updated"?(y.value=!1,t.target.innerText="Update Profile",L.value="Your profile was updated succesfully",E.value=!0,g.company_logo&&(a.company_logo=`https://easyrentage.s3.af-south-1.amazonaws.com/${g.company_logo}`)):(C.value="There was a problem processing your request, try again later",k.value=!0,y.value=!1,t.target.innerText="Update Profile",y.value=!1)}}async function te(t){if(H()&&Y&&Z()){y.value=!0,t.target.innerText="Updating Password...";const s=await P.update_password(r);s.message==="Updated"?(y.value=!1,t.target.innerText="Update Password",r.old_password="",r.new_password="",r.confirm_password="",L.value="Your password was updated succesfully",E.value=!0):s.message==="Old password incorrect"?(y.value=!1,t.target.innerText="Update Password",r.old_password="",r.new_password="",r.confirm_password="",C.value="Old password is incorrect",k=!0):(y.value=!1,t.target.innerText="Update Password",r.old_password="",r.new_password="",r.confirm_password="",C.value="An error occured, please try again later.",k.value=!0)}}function oe(t){switch(t.target.innerText){case"Delete account permanently":O.value="Everything about this account will be deleted, including all your listings. do you still wish to continue";break}T.value=!0}function le(t){k.value=!1}async function re(t){let s;switch(t){case"Everything about this account will be deleted, including all your listings. do you still wish to continue":s=await P.delete_account(),s.message==="Account deleted"&&window.location.replace("/");break}}function ie(t){T.value=!1}return(t,s)=>{const p=G("font-awesome-icon"),g=G("router-link");return f(),v("div",{id:"body",onClick:ee},[e("div",Be,[I(ve,{id:"main_nav",style:{display:"none"}}),n(k)?(f(),B(Ee,{key:0,id:"display_error_modal",error_description:n(C),onRemove_error_modal:le},null,8,["error_description"])):h("",!0),n(E)?(f(),B(Ie,{key:1,id:"display_success_modal",success_description:n(L),onRemove_success_modal:ne},null,8,["success_description"])):h("",!0),Pe,I(p,{class:"remove fa-solid fa-navicon",onClick:Q,id:"hamburger",icon:"fa-solid fa-navicon"}),I(he,{id:"dashboard_nav",easycoins:n(_).easycoins,style:{display:"none"}},null,8,["easycoins"]),e("ul",Ve,[n(V)?(f(),B(g,{key:0,to:"/sign-in",class:"",id:"signInbtn"},{default:we(()=>[b("Sign in")]),_:1})):h("",!0),n(N)?(f(),v("li",{key:1,class:"remove",style:{padding:"0px"},onClick:X},"Menu")):h("",!0)])]),n(T)?(f(),B(Ce,{key:0,id:"display_confirmation_modal",category:n(O),onRemove_confirmation_modal:ie,onDelete_modal:re},null,8,["category"])):h("",!0),e("div",Ne,[Ae,e("div",De,[Se,e("form",Te,[Le,c(e("input",{type:"text",id:"firstname",name:"firstname","onUpdate:modelValue":s[0]||(s[0]=l=>n(a).firstname=l),placeholder:"First Name"},null,512),[[u,n(a).firstname]]),e("p",Re,w(n(d).firstname_err),1),$e,c(e("input",{type:"text",name:"lastname","onUpdate:modelValue":s[1]||(s[1]=l=>n(a).lastname=l),placeholder:"Last Name"},null,512),[[u,n(a).lastname]]),e("p",Me,w(n(d).lastname_err),1),Oe,c(e("input",{type:"text",name:"phone","onUpdate:modelValue":s[2]||(s[2]=l=>n(a).phone=l),placeholder:"Phone e.g 08135637373"},null,512),[[u,n(a).phone]]),e("p",qe,w(n(d).phone_err),1),ze,c(e("input",{type:"text",name:"email",placeholder:"Email","onUpdate:modelValue":s[3]||(s[3]=l=>n(a).email=l),readonly:"readonly"},null,512),[[u,n(a).email]]),Fe,We,c(e("input",{type:"text",placeholder:"Company Name",name:"company_name","onUpdate:modelValue":s[4]||(s[4]=l=>n(a).company_name=l)},null,512),[[u,n(a).company_name]]),e("p",He,w(n(d).company_name_err),1),Ye,c(e("input",{type:"text",style:{"text-transform":"none"},placeholder:"Company Address e.g 10 Lugard Street Ikoyi, Lagos - Nigeria",name:"company_address","onUpdate:modelValue":s[5]||(s[5]=l=>n(a).company_address=l)},null,512),[[u,n(a).company_address]]),e("p",Ze,w(n(d).company_name_err),1),je,c(e("input",{type:"text",name:"whatsapp","onUpdate:modelValue":s[6]||(s[6]=l=>n(a).whatsapp=l),placeholder:"Whatsapp e.g 08135637373"},null,512),[[u,n(a).whatsapp]]),Ge,Ke,c(e("input",{type:"text",style:{"text-transform":"none"},name:"website_link","onUpdate:modelValue":s[7]||(s[7]=l=>n(a).website_link=l),placeholder:"Website link e.g https://realhouse.com "},null,512),[[u,n(a).website_link]]),Je,Qe,c(e("textarea",{placeholder:"Brief write up about your company",style:{"text-transform":"none"},name:"about_company","onUpdate:modelValue":s[8]||(s[8]=l=>n(a).about_company=l)},null,512),[[u,n(a).about_company]]),e("p",{class:"err",style:{color:"gray"},ref_key:"description_counter",ref:S},w(n(a).about_company.length)+"/400 characters",513),Xe,n(a).company_logo!==" "&&n(a).company_logo&&n(a).company_logo!=="https://easyrentage.s3.af-south-1.amazonaws.com/"?(f(),v("div",{key:0,id:"company_logo_div",style:ge({"margin-bottom":"10px",height:"160px",width:"160px",background:`gray url(${n(a).company_logo}) no-repeat`,"background-size":"cover","background-position":"center"})},null,4)):h("",!0),ea,aa,e("button",{type:"submit",onClick:$(se,["prevent"]),id:"signupbtn",disabled:n(y)},"Update Profile",8,na)])]),e("div",sa,[ta,e("form",oa,[c(e("input",{type:"password","onUpdate:modelValue":s[9]||(s[9]=l=>n(r).old_password=l),placeholder:"Old password"},null,512),[[u,n(r).old_password]]),e("p",la,w(n(m).old_password_err),1),c(e("input",{type:"password","onUpdate:modelValue":s[10]||(s[10]=l=>n(r).new_password=l),placeholder:"New password"},null,512),[[u,n(r).new_password]]),e("p",ra,w(n(m).new_password_err),1),c(e("input",{type:"password","onUpdate:modelValue":s[11]||(s[11]=l=>n(r).confirm_password=l),placeholder:"Confirm password"},null,512),[[u,n(r).confirm_password]]),e("p",ia,w(n(m).confirm_password_err),1),e("button",{onClick:$(te,["prevent"]),type:"submit",disabled:n(y)},"Update password",8,da)])]),e("div",pa,[_a,e("div",ca,[ua,n(A).includes(n(a).email)===!1?(f(),v("p",ma,[b("Be notified when there is a new property on easyrentage"),e("a",{href:`/subscribed-listing-alert/${n(a).firstname+" "+n(a).lastname}&${n(a).email}`},"Enable",8,fa)])):h("",!0),n(A).includes(n(a).email)?(f(),v("p",ya,[b("Be notified when there is a new property on easyrentage"),e("a",{style:{color:"red"},href:`/Unsubscribed-listing-alert/${n(a).firstname+" "+n(a).lastname}&${n(a).email}`},"Disable",8,ha)])):h("",!0)]),wa,e("div",ga,[va,n(D).includes(n(a).email)===!1?(f(),v("p",ba,[b("Be notified when there is a new property request on easyrentage"),e("a",{href:`/subscribed-request-alert/${n(a).firstname+" "+n(a).lastname}&${n(a).email}`},"Enable",8,ka)])):h("",!0),n(D).includes(n(a).email)?(f(),v("p",Ua,[b("Be notified when there is a new property request on easyrentage"),e("a",{style:{color:"red"},href:`/Unsubscribed-request-alert/${n(a).firstname+" "+n(a).lastname}&${n(a).email}`},"Disable",8,xa)])):h("",!0)]),Ea,Ca,Ia,e("div",Ba,[Pa,e("p",null,[b("Once account is deleted you won't be able to restore it. Do you still want to delete?"),e("a",{href:"#",onClick:$(oe,["prevent"])},"Delete account permanently")])])])]),I(be)])}}},La=de(Va,[["__scopeId","data-v-8924f055"]]);export{La as default};
