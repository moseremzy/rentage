import{_ as ee,F as ae,D as oe,M as ne,u as te,a as se,r as t,g as q,t as B,P as le,o as ie,h as de,i as p,b as f,c as g,e as a,j as i,l as T,w as z,m as b,n as _,C as re,E as ce,z as c,H as F,A as N,K as _e,p as ue,d as fe,q as me}from"./index-LjW8QbZt.js";import{C as pe}from"./ConfirmationModal-qGjs4P3k.js";const ge={components:{FOOTER:ae,DASHBOARD:oe,CONFIRMATIONMODAL:pe,MENU:ne},setup(){const r=te();se();let s=t(!1),C=t(!1),o=t(!1),w=t(void 0),k=t(void 0),v=t(!1),l=t(void 0),y=t(void 0),m=t(void 0),h=t(void 0),I=t([]),e=t([]),E=t(void 0),R=t(void 0),L="https://easyrentage.s3.af-south-1.amazonaws.com/",x=t({}),S=t(null),D=t(null);const{data:V,error:ze}=q("/api/loggedIn",N.loggedIn),{data:U,error:Fe}=q("/api/fetch_properties",N.fetch_properties);setTimeout(()=>{let n=B(V.value);m.value=n.message,M(m),x.value=n.user,e.value=B(U.value);let d=le.get_savedproperties_page(r.query.page,m.value,B(x.value),B(e.value).listings);switch(d.message){case"Bad request":window.location.assign("/page-not-found");break;case"error occured":window.location.assign("/error");break;case"user does not exist":window.location.assign("/sign-in");break;default:I.value=d.paginatedListings,R.value=d.total_pages;break}},1e3);function A(){setTimeout(()=>{let n=document.getElementById("main_nav");F.screenhandler(window.innerWidth,1027,n)})}function H(){let n=document.getElementById("main_nav"),d=document.getElementById("dashboard_nav"),u=document.getElementById("delete_nav");n.style.display==="none"?n.style.display="inline-block":n.style.display="none",d.style.display="none",u.style.display="none"}function W(){let n=document.getElementById("main_nav"),d=document.getElementById("dashboard_nav"),u=document.getElementById("delete_nav");d.style.display==="none"?d.style.display="inline-block":d.style.display="none",n.style.display="none",u.style.display="none"}function G(){let n=document.getElementById("main_nav"),d=document.getElementById("dashboard_nav"),u=document.getElementById("delete_nav");u.style.display==="inline-block"?u.style.display="none":u.style.display="inline-block",n.style.display="none",d.style.display="none"}function j(n){let d=document.getElementById("dashboard_nav"),u=document.getElementById("main_nav"),Z=document.getElementById("delete_nav"),$=document.getElementById("sub_div");n.target.className.toString().includes("remove")==!1&&(d.style.display="none",$.style.display="none",Z.style.display="none"),F.removenav(n,window.innerWidth,1027,u)}function P(){h.value=r.params.message,window.setTimeout(()=>{h.value=void 0},3e3)}function M(n){n.value===!0?(w.value=!1,k.value=!0):(w.value=!0,k.value=!1,window.location.assign("/sign-in"))}function K(n){switch(n.target.innerText){case" Remove All Properties from Favorites?":l.value="All your listings will be unsaved, do you wish to continue",y.value=void 0;break;case" Remove":l.value="Are you sure you want to remove listing with id ",y.value=`${n.target.parentElement.parentElement.children[0].children[1].children[3].children[1].innerText}`;break}v.value=!0}async function J(n){switch(n){case"All your listings will be unsaved, do you wish to continue":await N.remove_all_properties(),window.location.assign("/dashboard/saved-properties?page=1");break;default:let d=`${n.split(" ")[n.split(" ").length-1]}`;await N.add_to_favorites({listing_id:d}),window.location.assign("/dashboard/saved-properties?page=1");break}}function Q(n){v.value=!1}function X(){r.query.page!=R.value?window.location.assign("/dashboard/saved-properties?page="+ ++r.query.page):S.value.attributes[1].nodeValue="color: gray;"}function Y(){r.query.page!=1?window.location.assign("/dashboard/saved-properties?page="+--r.query.page):D.value.attributes[1].nodeValue="color: gray;"}return ie(()=>{A(),window.addEventListener("resize",A),E.value=r.query.page,P()}),de(()=>{window.removeEventListener("resize",A)}),{main_nav:s,dashboard_nav:C,delete_nav:o,signInbtn:w,dashboardbtn:k,display_confirmation_modal:v,category:l,listing_id:y,isAuthenticated:m,message:h,paginated_listings:I,listings:e,page_number:E,total_pages:R,backendUrl:L,user:x,next_page:S,previous_page:D,screenhandler:A,toggle_main_nav:H,toggle_dashboard_nav:W,toggle_delete_nav:G,remove_navs:j,show:P,LoggedIn:M,initalise_categorical_delete:K,delete_modal:J,remove_confirmation_modal:Q,Next_page:X,Previous_page:Y}}},O=r=>(ue("data-v-b0f5c8be"),r=r(),fe(),r),ve={class:"header"},ye=O(()=>a("div",{class:"logo"},[a("a",{href:"#"},[a("img",{src:me,id:"logo",alt:"Logo"})])],-1)),he={class:"accesslinks"},be={class:"container"},we=O(()=>a("h1",null,"Saved properties",-1)),ke={class:"filter_action_flex"},Ie={class:"delete"},Ee={for:"delete"},Ae={id:"delete_nav",class:"select_delete",style:{display:"none"}},Be={class:"listings"},Ne={class:"houses"},Re=["href"],xe=["src"],Oe={class:"house_info"},Ce={style:{"font-size":"15px"}},Se=O(()=>a("hr",null,null,-1)),De={class:"sub_info"},Pe={key:0,id:"no_property"},Me={key:1,class:"pagination"},qe={style:{"font-size":"16px"}};function Te(r,s,C,o,w,k){const v=p("MENU"),l=p("font-awesome-icon"),y=p("DASHBOARD"),m=p("router-link"),h=p("CONFIRMATIONMODAL"),I=p("FOOTER");return f(),g("div",{id:"body",onClick:s[6]||(s[6]=(...e)=>o.remove_navs&&o.remove_navs(...e))},[a("div",ve,[i(v,{id:"main_nav",style:{display:"none"}}),ye,i(l,{class:"remove fa-solid fa-navicon",onClick:o.toggle_main_nav,id:"hamburger",icon:"fa-solid fa-navicon"},null,8,["onClick"]),i(y,{id:"dashboard_nav",easycoins:o.user.easycoins,style:{display:"none"}},null,8,["easycoins"]),a("ul",he,[o.signInbtn?(f(),T(m,{key:0,to:"/sign-in",class:"",id:"signInbtn"},{default:z(()=>[_("Sign in")]),_:1})):b("",!0),o.dashboardbtn?(f(),g("li",{key:1,class:"remove",style:{padding:"0px"},onClick:s[0]||(s[0]=(...e)=>o.toggle_dashboard_nav&&o.toggle_dashboard_nav(...e))},"Menu")):b("",!0)])]),o.display_confirmation_modal?(f(),T(h,{key:0,id:"display_confirmation_modal",category:o.category,listing_id:o.listing_id,onRemove_confirmation_modal:o.remove_confirmation_modal,onDelete_modal:o.delete_modal},null,8,["category","listing_id","onRemove_confirmation_modal","onDelete_modal"])):b("",!0),a("div",be,[we,a("div",ke,[a("div",Ie,[a("label",Ee,[_("Action "),i(l,{class:"fa-solid fa-trash",style:{"font-size":"11px"},icon:"fa-solid fa-trash"})]),a("button",{id:"delete_btn",onClick:s[2]||(s[2]=(...e)=>o.toggle_delete_nav&&o.toggle_delete_nav(...e)),class:"remove"},[_("Remove "),a("span",Ae,[a("p",{onClick:s[1]||(s[1]=(...e)=>o.initalise_categorical_delete&&o.initalise_categorical_delete(...e))},[i(l,{class:"fa-solid fa-trash",icon:"fa-solid fa-trash"}),_(" Remove All Properties from Favorites?")])])])])]),a("div",Be,[(f(!0),g(re,null,ce(o.paginated_listings,e=>(f(),g("div",Ne,[a("a",{href:"/view-listing/"+e.id,class:"",style:{"text-decoration":"none"}},[a("img",{src:o.backendUrl+e.pictures[0]},null,8,xe),a("div",Oe,[a("h1",null,[i(l,{class:"fa-solid fa-home",icon:"fa-solid fa-home"}),_(" "+c(`${e.bedroom}`>0?`${e.bedroom} bedroom`:" ")+" "+c(`${e.subtype}`||`${e.type}`)+" "+c(`${e.category}`),1)]),a("h2",null,[i(l,{class:"fa-solid fa-location-crosshairs",icon:"fa-solid fa-location-crosshairs"}),_(" "+c(e.location)+" "+c(e.town)+", "+c(e.state)+" state.",1)]),a("p",null,[i(l,{class:"fa-solid fa-calender-days",icon:"fa-solid fa-calender-days",style:{"font-size":"11px"}}),_(" Date Added: "),a("b",null,c(e.dateAdded),1)]),a("p",null,[i(l,{class:"fa-solid fa-fingerprint",icon:"fa-solid fa-fingerprint",style:{"font-size":"11px"}}),_(" Property Id: "),a("b",null,c(e.id),1)]),a("p",null,[i(l,{class:"fa-solid fa-clipboard-check",icon:"fa-solid fa-clipboard-check",style:{"font-size":"11px"}}),_(" Status: "),a("b",{style:_e(e.status==="Published"?{color:"green"}:e.status==="Unpublished"?{color:"red"}:{color:"gray"})},c(e.status),5)]),a("p",null,[_("Price: "),a("b",Ce,c(new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(e.price))+" "+c(e.payment),1)])])],8,Re),Se,a("div",De,[i(m,{to:"/view-listing/"+e.id,class:"sub_info_child"},{default:z(()=>[i(l,{class:"fa-solid fa-pen-to-square",icon:"fa-solid fa-pen-to-square"}),_(" View")]),_:2},1032,["to"]),a("p",{onClick:s[3]||(s[3]=(...E)=>o.initalise_categorical_delete&&o.initalise_categorical_delete(...E)),class:"sub_info_child"},[i(l,{class:"fa-solid fa-trash",icon:"fa-solid fa-trash"}),_(" Remove")])])]))),256))]),o.paginated_listings.length===0?(f(),g("p",Pe,"No Saved Properties")):b("",!0),o.total_pages>1?(f(),g("div",Me,[a("p",{style:{color:"black",cursor:"pointer"},ref:"previous_page",onClick:s[4]||(s[4]=(...e)=>o.Previous_page&&o.Previous_page(...e))},[i(l,{class:"fa-solid fa-arrow-left-long",icon:"fa-solid fa-arrow-left-long"})],512),a("p",qe,"Page "+c(r.route.query.page)+" of "+c(o.total_pages),1),a("p",{style:{color:"black",cursor:"pointer"},ref:"next_page",onClick:s[5]||(s[5]=(...e)=>o.Next_page&&o.Next_page(...e))},[i(l,{class:"fa-solid fa-arrow-right-long",icon:"fa-solid fa-arrow-right-long"})],512)])):b("",!0)]),i(I)])}const He=ee(ge,[["render",Te],["__scopeId","data-v-b0f5c8be"]]);export{He as default};
